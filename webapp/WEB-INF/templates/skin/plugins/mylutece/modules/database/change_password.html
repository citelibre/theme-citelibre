<@cContainer>
    <@cRow>
        <@cCol>
            <@cTitle>#i18n{module.mylutece.database.xpage.change_password.pageTitle}</@cTitle>
            <!-- Form container -->
            <@cSection class="form-container">
                <#if action_successful?has_content>
                    <@cTitle level=2>#i18n{module.mylutece.database.message.change_password.success}</@cTitle>
                    <@cForm name='changePassword' action='${action_successful}'>
                        <@cBtn params='name="btnBack"' label='#i18n{module.mylutece.database.xpage.account.btnBack}' class='btn-outline-sm' />
                    </@cForm>
                <#else>
                    <#if error_code?has_content >
                        <#assign typeClass='invalid-feedback' />
                        <#if error_code = 'error_mandatory_fields'>
                            <div class="alert alert-danger">#i18n{module.mylutece.database.message.account.errorMandatoryFields}</div>
                            <#assign classOldPassword = typeClass />
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = 'error_old_password'>
                            <div class="alert alert-danger">#i18n{module.mylutece.database.message.change_password.badOldPassword}</div>
                            <#assign classOldPassword = typeClass />
                        </#if>
                        <#if error_code = 'error_confirmation_password'>
                            <div class="alert alert-danger">#i18n{module.mylutece.database.message.account.errorConfirmation}</div>
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = 'error_same_password'>
                            <div class="alert alert-danger">#i18n{module.mylutece.database.message.change_password.errorSamePassword}</div>
                            <#assign classOldPassword = typeClass />
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = 'password_minimum_length'>
                            <div class="alert alert-danger">${password_minimum_length!}</div>
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = 'password_format'>
                            <div class="alert alert-danger">#i18n{mylutece.message.password.format}</div>
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = 'password_already_used'>
                            <div class="alert alert-danger">#i18n{mylutece.message.password.passwordAlreadyUsed}</div>
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = 'max_password_change'>
                            <div class="alert alert-error">#i18n{mylutece.message.password.maxPasswordChange}</div>
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                    </#if>	
                    <@cForm action='jsp/site/plugins/mylutece/modules/database/DoChangePassword.jsp' name="changePassword">
                        <@cInput type='hidden' name='plugin_name' value='${plugin_name}' />
                        <@cField>
                            <@cInput type='password' class=classOldPassword name='old_password' required=true/>
                            <@cLabel for='old_password'>#i18n{module.mylutece.database.xpage.change_password.oldPassword}</@cLabel>
                        </@cField>
                        <@cField>
                            <@cInput type='password' class=classNewPassword name='new_password' required=true/>
                            <@cLabel for='new_password'>#i18n{module.mylutece.database.xpage.change_password.newPassword}</@cLabel>
                        </@cField>
                        <@cField>
                            <@cInput type='password' class=classConfirmation name='confirmation_password' required=true />
                            <@cLabel for='confirmation_password'>#i18n{module.mylutece.database.xpage.change_password.confirmationPassword}</@cLabel>
                        </@cField>
                        <@cField>
                            <@cBtn label='#i18n{module.mylutece.database.xpage.change_password.btnValidate}' class='form-control-submit-button' type="submit" params='name="changePassword"' />
                        </@cField>
                    </@cForm>
                </#if>
            </@cSection> 
            <!-- end of form container -->
        </@cCol> <!-- end of col -->
    </@cRow> <!-- end of row -->
</@cContainer> <!-- end of container -->
<script>$(function(){ $('.ex-header').hide()});</script>