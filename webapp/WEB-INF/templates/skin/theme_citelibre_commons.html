<#-- WARNING : be careful to white-space and lines break in FreeMarker macros.
 # This macro template can be used to output white-space-sensitive formats (like RSS files).
 # See http://dev.lutece.${mainSite}/jira/browse/LUTECE-765
-->
<#-- THEME LINKS AND LABELS VARIABLES                                               -->
<#assign logoHeader>${dskey('portal.site.site_property.logo_url')}</#assign>
<#assign logoFooter>${dskey('portal.site.site_property.logo_url')}</#assign>
<#assign mainSite>Paris.fr</#assign>
<#assign urlMainSite>${mainSite?lower_case}</#assign>
<#assign urlDefaultBannerImage>${dskey('themecitelibre.site_property.banner.image')}</#assign>
<#-- END THEME LINKS AND LABELS VARIABLES                                          -->
<#-- MACROS                                                                        -->
<#-- NAVIGATION                                                                    -->
<#-- SkipNav -->
<#-- Params
    - title   : Title shown over the banner
    - logoImg : Default: Empty string, show logo instead of text title, title is set as title html attribute for the logo image.
    - hasMenu : Default: true; 
    Nested content : Shows default page menu, but can other item can be add using @mainNavItem macro.
-->
<#macro skipNav>
<div class="skipnav">
    <a id="skip_url" href="#main">#i18n{themecitelibre.skipnav}</a>
</div>
<h1 id="top" class="visually-hidden"visually-hidden-focusable">#i18n{themecitelibre.gohome}</h1>
</#macro>
<#-- mainMenu -->
<#-- Params
    - title   : Title shown over the banner
    - logoImg : Default: Empty string, show logo instead of text title, title is set as title html attribute for the logo image.
    - hasMenu : Default: true; 
    Nested content : Shows default page menu, but can other item can be add using @mainNavItem macro.
-->
<#macro cMainNav title=favourite logoImg='' hasMenu=true hasSearchMenu=false hasLogin=true id='' hasDarkModeSwitch=true class='' params='' >
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top<#if class !='' > ${class!}</#if>"<#if id !='' > id="${id!}"</#if><#if params!=''> ${params}</#if> aria-label="" role="navigation">
    <div class="container">
        <!-- Text Logo - Use this if you don't have a graphic logo -->
        <!-- <a class="navbar-brand logo-text page-scroll" href="index.html">Tivo</a> -->
        <!-- Image Logo -->
        <a class="navbar-brand logo-image text-decoration-none" href=".">
            <img src="images/logo-pack-light.min.svg" alt="alternative">
        </a> 
        <!-- Mobile Menu Toggle Button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-menu ti ti-menu-2"></span>
            <span class="navbar-toggler-menu ti ti-x"></span>
        </button>
        <!-- end of mobile menu toggle button -->
        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <#if hasMenu>
            <#assign menu=page_main_menu!>
            <ul class="navbar-nav navbar-main align-items-center ms-auto">
                <li class="nav-item">
                    <a class="nav-link page-scroll" href="jsp/site/Portal.jsp#header">#i18n{portal.site.page_home.label} <span class="visually-hidden">(#i18n{portal.site.page_home.label})</span></a>
                </li>
                ${page_main_menu_html!menu}
                <#nested>
                <#if hasSearchMenu>
                    <nav class="navbar-menu-search ml-auto" aria-label="" role="navigation">
                        <form class="form-inline" role="search" action="${urlSearch!}" method="get">
                            <input type="hidden" name="page" value="search-solr">
                            <input type="hidden" name="fq" value="type:formsResponse">
                            <div class="input-group">
                                <input type="text" name="query" id="query" class="form-control mr-sm-2" placeholder="#i18n{portal.site.page_menu_tools.labelSearch}" aria-label="#i18n{portal.site.page_menu_tools.labelSearch}" aria-describedby="button-main-search">
                                <div class="input-group-append">
                                    <button id="button-main-search" class="btn btn-link" type="submit">
                                        <@cIcon class='search' label='#i18n{portal.site.page_menu_tools.labelSearch}' />
                                    </button>
                                </div>
                            </div>
                        </form>  
                    </nav>
                </#if>
                <li class="nav-item">
                    <#if hasLogin>${pageinclude_userlogin?default("")}</#if>
                </li>
                <#if hasDarkModeSwitch>
                    <li class="nav-item">    
                        <label class="nav-dark-mode" for="darkSwitch" title="Switch Dark/light mode"><span class="visually-hidden">Dark Mode </span>
                            <input type="checkbox" id="darkSwitch" class="visually-hidden" />
                            <i class="fa fa-sun"></i><i class="fa fa-moon"></i>
                        </label>
                    </li>
                </#if>
            </ul>
        </#if>
        </div>
    </div> <!-- end of container -->
</nav> <!-- end of navbar -->
<!-- end of navigation -->
</#macro>
<#-- cMainNavUser -->
<#-- Params
    - title   : Title shown over the banner
    - logoImg : Default: Empty string, show logo instead of text title, title is set as title html attribute for the logo image.
    - hasMenu : Default: true; 
    Nested content : Shows default page menu, but can other item can be add using @mainNavItem macro.
-->
<#macro cMainNavUser connected userName urlConnect title='#i18n{themecitelibre.labelConnect}' id='' class='' params=''>
<#if !connected>
    <span class="nav-item">
        <a class="btn-outline-sm" href="${urlConnect!}">LOG IN</a>
    </span>
<#else>
    <li class="nav-item dropdown<#if class !='' > ${class!}</#if>"<#if id !='' > id="${id!}"</#if><#if params!=''> ${params}</#if>">
        <a class="btn-outline-sm dropdown-toggle disabled" href="#" id="navbarDropdown" role="button" aria-haspopup="true" aria-expanded="false">${userName?upper_case} </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="${urlConnect!}" title="#i18n{themecitelibre.titleDisconnect}">
                <i class="fa fa-power-off" aria-hidden="true"></i> 
                <span>#i18n{themecitelibre.labelDisconnect}</span>  
            </a>
        </div>
    </li>
</#if>
</#macro>
<#-- cDropNav -->
<#-- Params
    - title   : Title shown over the banner
    - logoImg : Default: Empty string, show logo instead of text title, title is set as title html attribute for the logo image.
    - hasMenu : Default: true; 
    Nested content : Shows default page menu, but can other item can be add using @mainNavItem macro.
-->
<#macro cDropNav title icon='' caret='' expanded=false id='' class='' params=''>
<#local cId=rand('drop')>
<#if id !=''><#local cId=id /></#if>
<div class="dropdown" <#if class !='' > ${class!}</#if>"<#if params!=''> ${params}</#if>>
    <a class="nav-link" href="#" role="button" id="dropdownMenu${cId!}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="${expanded?c}">
        ${icon!} ${title!} ${caret!}
    </a>
    <div class="dropdown-menu" aria-labelledby="dropdownMenu${cId!}">
        <div class="dropdown-content">
            <#nested>
        </div>
    </div>
</div>
</#macro>
<#-- mainNavItem -->
<#-- 
    Params
    - title   : Default:'Menu', Title 
    - url     : Default: Empty string, Url link
    - target  : Default: Empty string, values  are _top, _blank, _parent
-->
<#macro cMainNavItem title url target='' id='' class=''  params=''>
<li class="nav-item<#if class !='' > ${class!}</#if>"<#if id !='' > id="${id!}"</#if><#if params!=''> ${params}</#if>>
    <a class="nav-link" href="${url}" <#if target!='_blank'>title="${title} #i18n{themecitelibre.newWindowLink}"</#if> <#if target!=''>target="${target}"</#if>>
        ${title!}
        <#nested>
    </a>
</li> 
</#macro>
<#-- cMainBanner -->
<#-- 
    Params
    - title : Default: Site Favorite value, String title shown over the banner
    - titleBorder : Default: true, add a border on banner text for accessibility purpose.
    - onlyHome : Default: true, banner will be displayed only on home.
    - onlyHome : Default: true, banner will be displayed only on home.
    - class : Default: ''
    - id : Default: ''
    - params : Default: ''
-->
<#macro cMainBanner title=favourite internal=false class='' id='' params=''  >
<header id="header" class="header<#if class!=''> ${class}</#if>">
<@cContainer hasHeader=false>
    <@cRow>
        <@cCol>
            <@cTitle>${title!}</@cTitle>
        </@cCol>
    </@cRow>
</@cContainer>
</header> <!-- end of header -->
</#macro>
<#-- cBreadCrumb -->
<#-- 
    Params
    - home : Default: 'Home', String name of the home page
    - items : Default: '', list of items
-->
<#macro cBreadCrumb home='#i18n{themecitelibre.home}' items='' >
<nav aria-label="#i18n{themecitelibre.breadcrumb}" class="breadcrumb-nav lutece-breadcrumb">
	<div class="container">
		<ol class="breadcrumb">
            <#if home!=''>
                <li class="breadcrumb-item">
                    <a target="_top" href=".">${home!}</a>
                </li>
            </#if>
            <#if items?has_content>
                <#assign iMax=items?size>
                <#assign idx=1>
                <#list items as i>
                    <li class="breadcrumb-item <#if iMax==idx>active</#if>"<#if iMax==idx> aria-current="page"</#if>>
                        <#if idx lt iMax>
                        <a href="${i.url!}" title="${i.title!}" target="_top">
                        </#if>
                        ${i.title!}
                        <#if idx lt iMax>
                        </a>
                        </#if>
                    </li>
                    <#assign idx+=1>
                </#list>
            </#if>
           <#nested> 
        </ol>
	</div>
</nav>
</#macro> 
<#-- 
Private : Only for cMainFooter's macros
-->
<#-- mainFooter -->
<#-- Params
    - title : Default: 'Service', String title shown after the logo
    -nested_pos : Default:'after', Position of nested content, 2 values before or after
    Only nested content
-->
<#macro cMainFooter title='${mainSite}' nested_pos='after'>
<div class="footer" role="content-info">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="footer-col first">
                    <h4>${dskey('themecitelibre.site_property.footer.about.title')}</h4>
                    <p class="p-small">${dskey('themecitelibre.site_property.footer.about')}</p>
                </div>
            </div> <!-- end of col -->
            <div class="col-md-4">
                <div class="footer-col middle">
                    <h4>${dskey('themecitelibre.site_property.footer.links.title')}</h4>
                    <ul class="list-unstyled li-space-lg">
                        <#if nested_pos='before'>
                            <#nested>
                        </#if>
                        <li>
                            <i class="fas fa-lightbulb fa-fw"></i><a class="white p-small ms-2" href="https://lutece.paris.fr/support/wiki/home.html" target="_blank" title="[#i18n{portal.site.portal_footer.newWindow}] Wiki Lutece">Wiki</a>
                        </li>
                        <li>
                            <i class="fas fa-sitemap fa-fw"></i> 
                            <a class="white p-small ms-2" href="jsp/site/Portal.jsp?page=map" >#i18n{portal.site.site_map.pageTitle}</a>
                        </li>
                        <li>
                            <i class="fas fa-star fa-fw"></i>     
                            <a class="white p-small ms-2" href="jsp/site/PopupCredits.jsp" title="#i18n{portal.site.portal_footer.labelCredits}" data-bs-info="#i18n{portal.site.portal_footer.labelCredits}"  data-bs-toggle="modal" data-bs-target="#citelibreModal" >
                            #i18n{portal.site.portal_footer.labelCredits}
                            </a>
                        </li>
                        <li>
                            <i class="fas fa-info-circle fa-fw"></i>     
                            <a class="white p-small ms-2" href="jsp/site/PopupLegalInfo.jsp" title="#i18n{portal.site.portal_footer.labelInfo}" data-bs-info="#i18n{portal.site.portal_footer.labelInfo}" data-bs-toggle="modal" data-bs-target="#citelibreModal" >
                                #i18n{portal.site.portal_footer.labelInfo}
                            </a>
                        </li>
                        <li>
                            <i class="fas fa-universal-access fa-fw"></i>     
                            <a class="white p-small ms-2" href="jsp/site/Portal.jsp?page=htmlpage&amp;htmlpage_id=1" title="#i18n{themecitelibre.labelLinkAccessibility}">
                                #i18n{themecitelibre.labelLinkAccessibility}
                            </a>
                        </li>
                        <#if nested_pos='after'>
                            <#nested>
                        </#if>
                    </ul>
                </div>
            </div> <!-- end of col -->
            <div class="col-md-4">
                <#if isContactInstalled?? && isContactInstalled>
                    <div class="footer-col last">
                        <h4>Contact</h4>
                        <ul class="list-unstyled li-space-lg">
                            <li>
                                <i class="far fa-address-book"></i> 
                                <a class="white p-small ms-2" href="jsp/site/Portal.jsp?page=contact&view=viewContactPage&id_contact_list=1&message_object=Ask%20for%20a%20demo&contact=1" title="Contact" > Contact</a>
                            </li>
                        </ul>
                    </div> 
                </#if>
                <div class="footer-col last">
                    <h4>Cookies</h4>
                    <ul class="list-unstyled">
                        <li class="text-white p-small"> 
                            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" fill="#fff" viewBox="0 0 512 512"><path d="M510.4 254.8l-12.1-76.3a132.5 132.5 0 0 0 -37.2-73l-54.8-54.8c-19.7-19.7-45.2-32.7-72.7-37.1l-76.7-12.2c-27.5-4.4-55.7 .1-80.5 12.8L107.3 49.6a132.3 132.3 0 0 0 -57.8 57.8l-35.1 68.9a132.6 132.6 0 0 0 -12.8 80.9l12.1 76.3a132.5 132.5 0 0 0 37.2 73l54.8 54.8a132.1 132.1 0 0 0 72.7 37.1l76.7 12.1c27.5 4.4 55.7-.1 80.5-12.8l69.1-35.2a132.3 132.3 0 0 0 57.8-57.8l35.1-68.9c12.7-25 17.2-53.3 12.8-81zM176 368c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-160c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm160 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>
                            <span id="tarteaucitronManager" class="ms-1 text-decoration-underline">${dskey('themecitelibre.site_property.footer.cookieLabel')}</span> 
                        </li>
                    </ul>
                </div> 
            </div> <!-- end of col -->
        </div> <!-- end of row -->
    </div> <!-- end of container -->
</div> <!-- end of footer -->  
<div class="modal fade" id="citelibreModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false"  aria-labelledby="citelibreModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="citelibreModalLabel">CiteLibre</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="#i18n{portal.util.labelClose}"></button>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-sm" data-bs-dismiss="modal">#i18n{portal.util.labelClose}</button>
        </div>
      </div>
    </div>
</div>
<script>
function loadModalContent( url, body, sel ) {
    const xhr = new XMLHttpRequest();
	xhr.open('GET', url, true);
    xhr.onreadystatechange = () => {
        if (xhr.readyState == 4 && xhr.status == 200) {
			const response = xhr.responseText;
			// Convert the response to a temporary div to manipulate as DOM
			const qDiv = document.createElement('div');
    		qDiv.innerHTML = response;
		    // Use querySelector or getElementsByClassName to select elements
    		body.innerHTML = qDiv.querySelector( sel ).innerHTML;
		}
	}
    xhr.send();
};

const citelibreModal = document.getElementById('citelibreModal')
if (citelibreModal) {
    citelibreModal.addEventListener('show.bs.modal', event => {
    // Button that triggered the modal
    const link = event.relatedTarget
    // Update the modal's title.
    const title = link.getAttribute('data-bs-info')
    const modalTitle = citelibreModal.querySelector('.modal-title')
    modalTitle.textContent = `${title}`
    // Update the modal's content.
    const url = link.getAttribute('href')
    const modalBody = citelibreModal.querySelector('.modal-body')
    const content = loadModalContent( url, modalBody, '#main .container .row .col' );
    modalBody.innerHTML = content;
  })
}
</script>
</#macro> 
<#-- END NAVIGATION             -->
<#-- HTML TAGS                  -->
<#-- Name :   cImg              -->
<#-- Attributes List  :         -->
<#-- src                        -->
<#-- title                      -->
<#-- alt                        -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro cImg src title alt='' id='' class='img-fluid' params=''>
<img src="${src!}" title="${title!}" alt="<#if alt !=''>${alt!}<#else>${title!}</#if>" class="<#if class!=''>${class!}</#if>"<#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if> >
</#macro>
<#-- Name :   cTitle            -->
<#-- Attributes List  :         -->
<#-- level                      -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro cTitle level=1 id='' class='' params=''>
<h${level}<#if class!=''> class="${class!}"</#if><#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if>>
<#nested/>
</h${level}>
</#macro>
<#-- Name :   cText    Inline text elements     -->
<#-- Attributes List  :                         -->
<#-- type: p, div, span, blockquote, strong, small   -->
<#-- id                                         -->
<#-- class                                      -->
<#-- params                                     -->
<#macro cText type='p' id='' class='' params=''>
<${type}<#if class!=''> class="${class!}"</#if><#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if>>
<#nested/>
</${type}>
</#macro>
<#-- Name :   cSection          -->
<#-- Attributes List  :         -->
<#-- type: section, div         -->
<#-- class (default) : ''       -->
<#-- id                         -->
<#-- params                     -->
<#macro cSection type='section' class='' id='' params=''>
<${type}<#if class!=''> class="${class}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</${type}>
</#macro>
<#-- Name : cFigure             -->
<#-- Attributes List  :         -->
<#-- desc                       -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro cFigure caption='' id='' class='figure' params=''>
<figure <#if class!=''>class="${class!}"</#if><#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if>>
<#nested/>
<#if caption!=''><figcaption class="figure-caption">${caption}</figcaption></#if>
</figure>
</#macro>
<#-- Name : FigCaption          -->
<#-- Attributes List  :         -->
<#-- desc                       -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro cFigCaption id='' class='' params=''>
<figcaption <#if class!=''>class="${class!}"</#if><#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if>>
<#nested/>
</figcaption>
</#macro>
<#-- Name : cPicture            -->
<#-- Attributes List  :         -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro cPicture id='' class='' params=''>
<picture<#if class!=''> class="${class!}"</#if><#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if>>
<#nested/>
</picture>
</#macro>
<#-- Name :   cPicSource       -->
<#-- Attributes List  :        -->
<#-- srcset                    -->
<#-- media                     -->
<#-- type                      -->
<#macro cPictureSrc srcset media='' type='' class='' id='' params=''>
<source srcset="${srcset}" <#if media!=''>media="${media!}"</#if><#if type!=''> type="${type!}"</#if><#if class!=''> class="${class!}"</#if><#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if>>
</#macro>
<#-- Name : chList              -->
<#-- Attributes List  :         -->
<#-- type                       -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro chList type='u' id='' class='' params=''>
<${type}l class="<#if class != ''>${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
    <#nested>
</${type}l>
</#macro>
<#-- Name : chItem              -->
<#-- Attributes List  :         -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro chItem id='' class='' params=''>
<li <#if class != ''>class="${class}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</li>
</#macro>
<#-- Name : cBadge              -->
<#-- Attributes List  :         -->
<#-- type  : pill, default ""   -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro cBadge class='' id='' params=''>
<span class="badge<#if class != ''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
<#nested>
</span>
</#macro>
<#-- Name : chItem              -->
<#-- Attributes List  :         -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro chItem id='' class='' params=''>
<li <#if class != ''>class="${class}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</li>
</#macro>
<#-- Name : cTable              -->
<#-- Attributes List  :         -->
<#-- caption                    -->
<#-- breakpoint                 -->
<#-- id                         -->
<#-- class                      -->
<#-- params                     -->
<#macro cTable caption='' summary='' breakpoint='' class='' id='' params=''>
<div class="table-responsive<#if breakpoint!=''>${breakpoint}</#if>">
<table class="ctable table <#if class !=''> ${class}</#if>"<#if summary !=''> summary="${summary!}"</#if><#if id !=''> id="${id!}"</#if><#if params!=''> ${params}</#if> >
    <#if caption !=''> <caption>${caption!}</caption></#if>
    <#nested>
</table>
</div>
</#macro>
<#-- Name : cThead              -->
<#-- Attributes List  :         -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cThead class='' id='' params=''>
<thead <#if class!=''>thead-${class!}</#if><#if id !=''> id="${id!}"</#if><#if params!=''> ${params!}</#if> >
<#nested>
</thead>
</#macro>
<#-- Name : cTfoot              -->
<#-- Attributes List  :         -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cTfoot class='' id='' params=''>
<tfoot <#if class!=''>thead-${class!}</#if><#if id !=''> id="${id!}"</#if><#if params!=''> ${params!}</#if> >
<#nested>
</tfoot>
</#macro>
<#-- Name : cTbody              -->
<#-- Attributes List  :         -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cTbody class='' id='' params=''>
<tbody <#if class!=''>${class!}</#if><#if id !=''> id="${id!}"</#if><#if params!=''> ${params!}</#if> >
<#nested>
</tbody>
</#macro>
<#-- Name : cTr                 -->
<#-- Attributes List  :         -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cTr class='' id='' params=''>
<tr <#if class!=''>${class!}</#if><#if id !=''> id="${id!}"</#if><#if params!=''> ${params!}</#if> >
<#nested>
</tr>
</#macro>
<#-- Name : cTh                 -->
<#-- Attributes List  :         -->
<#-- scope                      -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cTh id='' class='' scope='col' role='columnheader' params=''>
<th scope="${scope!}" class="<#if class != ''>${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
    <#nested>
</th>
</#macro>
<#-- Name : cTd                 -->
<#-- Attributes List  :         -->
<#-- id                         -->
<#-- class                      -->
<#-- scope                      -->
<#-- headers                    -->
<#-- role                       -->
<#-- params                     -->
<#macro cTd id='' class='' scope='' headers='' role='cell' params=''>
<td <#if scope!=''>scope="${scope!}"</#if><#if headers!=''> headers="${headers!}"</#if><#if class != ''>class="${class}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> <#if role!=''>role="${role!}"</#if>>
    <span><#nested></span>
</td>
</#macro>
<#-- MACRO FOR LAYOUT / GRID    -->
<#-- Name : cHeader             -->
<#-- Attributes List  :         -->
<#-- title                      -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cHeader title='' class='' id='' params=''>
<header <#if class!=''> class="${class!}"</#if><#if id!=''> id="${id!}"</#if><#if params!=''> ${params!}</#if> >
    <#if title !=''><@cTitle>${title}</@cTitle></#if>
    <#nested>
</header>
</#macro>  
<#-- Name : cFooter             -->
<#-- Attributes List  :         -->
<#-- title                      -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cFooter title='' class='' id='' params=''>
<footer<#if class!=''> class="${class}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
    <#if title !=''><@cTitle>${title}</@cTitle></#if>
    <#nested>
</footer>
</#macro>  
<#-- Name : cArticle             -->
<#-- Attributes List  :         -->
<#-- title                      -->
<#-- class                      -->
<#-- id                         -->
<#-- params                     -->
<#macro cArticle title='#i18n{themecitelibre.defaultArticleTitle}' titleClass='' class='portlet' id='' params=''>
<article class="<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
    <@cHeader title=title class=titleClass /> 
    <@cSection type='div' class='article-content'>
        <#nested>
    </@cSection>
</article>
</#macro>  
<#-- Name :   cContainer        -->
<#-- Attributes List  :         -->
<#-- class (default) : row      -->
<#-- id                         -->
<#-- params                     -->
<#macro cContainer hasHeader=true class='' id='' params=''>
<#if class!=''>
    <#local cClass>container ${class}</#local> 
<#else>
    <#local cClass>container</#local>
</#if>
<#if hasHeader><div class='ex-2-header' ></#if>
<@cSection type='div' class=cClass id=id params=params >
<#nested>
</@cSection>
<#if hasHeader></div></#if>
</#macro>
<#-- Name :   cRow              -->
<#-- Attributes List  :         -->
<#-- class (default) : row      -->
<#-- id                         -->
<#-- params                     -->
<#macro cRow class='' id='' params=''>
<@cSection type='div' class='row ${class}' id=id params=params >
<#nested>
</@cSection>
</#macro>
<#-- Name :   cCol                      -->
<#-- Attributes List  :                 -->
<#-- Attributes                         -->
<#-- cols                              -->
<#-- class                              -->
<#-- id                                 -->
<#-- params                             -->
<#macro cCol cols='' class='' id='' params=''>
<#if cols!=''>
    <#local cClass>col-${cols} ${class}</#local> 
<#else>
    <#local cClass>col ${class}</#local>
</#if>
<@cSection type='div' class=cClass id=id params=params >
<#nested>
</@cSection>
</#macro>
<#-- Progress macro
    token : the progress manager Feed Token
    interval : refresh period in milli seconds (if the feed token is provided) 
    showReport : display the messages report (if the feed token is provided) -->
<#macro cProgress label labelClass='' class='' color='primary' id='' params='' value=0 min=0 max=100 text='' progressId='progressbar' token='' showReport=false intervalTime=2000 >
<label id="${progressId}-label" class="label-progress<#if labelClass!=''> ${labelClass}</#if>">${label}</label>
<div class="progress<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<div id="${progressId}" class="progress-bar bg-${color}<#if token!=''> progressmanager</#if>" role="progressbar" style="width:${value}%;" aria-valuenow="${value}" aria-valuemin="${min}" aria-valuemax="${max}" <#if token!=''>token="${token}" intervalTime=${intervalTime} showReport=${showReport?c}</#if> >
        <#if text=''>${value}%<#else>${text}</#if>
    </div>       
</div>
<#if showReport ><div id="${progressId}-report" class="progress-bar-report" lastline=0></div></#if>
</#macro>
<#-- Macro for FORMS                -->
<#-- Name :   cStepDone             -->
<#-- Attributes List  :             -->
<#-- step                           -->
<#-- title                          --> 
<#-- actionName='action_doGoToStep' --> 
<#-- actionLabel='Modifier'         --> 
<#-- class                          -->
<#-- id                             -->
<#-- params                         -->
<#macro cStepDone step title idx actionName='action_doGoToStep' actionLabel='#i18n{themecitelibre.labelUpdate}' actionAriaLabelKey='themecitelibre.ariaLabelUpdate' class='' id='' params=''>
<@cSection type='div' class='step step-done ${class!}' id=id params=params>
	<@cSection type='div' class='step-title d-flex justify-content-between'>
        <@cContainer>
            <@cTitle>
                <@cText type='span'>${title}</@cText>
            </@cTitle>
        </@cContainer>    
        <#if actionName !=''>
            <@cSection type='div' class='d-none d-sm-block'>
                <button class="btn-outline-reg" name="${actionName}" type="submit" value="${idx!}" aria-label="${i18n(actionAriaLabelKey, title)?html}" formnovalidate>${actionLabel!}</button>
            </@cSection>    
        </#if>
    </@cSection>
	<@cContainer>
        <@cSection class='step-content'>
            <#nested>   
            <#if actionName !=''>
                <@cSection type='div' class='d-block d-sm-none'>
                    <button class="btn-outline-reg" name="${actionName}" type="submit" value="${idx!}" aria-label="${i18n(actionAriaLabelKey, title)?html}" formnovalidate>${actionLabel!}</button>
                </@cSection>    
            </#if>
        </@cSection>
    </@cContainer>
</@cSection>
</#macro>
<#macro cStepCurrent step title actionNextStep='' labelNextStep='#i18n{themecitelibre.labelNextStep}' actionPrevStep='' labelPrevStep='#i18n{themecitelibre.labelPrevStep}' actionSaveStep='' labelSaveStep='#i18n{themecitelibre.labelSaveStep}' showPrevStep=true hasSteps=true hasMandatory=true class='' params=''>
<@cSection type='div' id='current_step' class='step step-current ${class!}' params=params >
	<@cSection type='div' class='step-title'>
		<@cContainer>
            <#if hasSteps>
                <@cTitle class='' params='data-step="${step}"' ><@cText type='span'>${title}</@cText></@cTitle>
            <#else>
                <@cTitle class="no-step">${title}</@cTitle>    
            </#if>
        </@cContainer>
	</@cSection>
    <@cContainer>
        <@cSection class="step-content">
            <#nested>
            <@cFormRow>	
                <@cCol cols='12' class='d-flex justify-content-end my-2'>
                    <#if actionPrevStep !='' && showPrevStep >
                        <button class="btn-outline-reg  me-2 mt-1 order-sm-1" name="${actionPrevStep}" type="submit">
                            <span class="d-inline me-2">${labelPrevStep}</span> 
                        </button>
                    </#if> 
                    <#if actionNextStep !=''>
                        <button class="btn-solid-reg me-2 mt-1 order-sm-2" name="${actionNextStep}" type="submit">
                            <span class="d-inline me-2">${labelNextStep}</span> 
                        </button>
                    </#if>    
                    <#if actionSaveStep !=''>    
                        <button class="btn-solid-reg me-2 mt-1 order-sm-2" name="${actionSaveStep}" type="submit">
                            <span class="d-inline me-2">${labelSaveStep}</span> 
                        </button>
                    </#if>
                </@cCol>
            </@cFormRow>
            
	    </@cSection>
    </@cContainer>    
</@cSection>   
<script>
$( function() {
	<#if step?number gt 1 >
	var current = document.querySelector('#current_step');
	var y = current.offsetTop - 180;
	window.scrollBy(0, y);
	</#if>
});
</script> 
</#macro>
<#macro cStepNext step title class='' id='' params=''>
<#local stepClass>step step-next<#if class!=''>${class}</#if></#local>
<@cSection type='div' class=stepClass id=id params=params>
    <@cSection type='div' class='step-title'>
        <@cSection type='div' class='container'>
            <@cTitle params=' data-step="${step}"'><@cText type='span'>${title}</@cText></@cTitle>
        </@cSection>
    </@cSection>
</@cSection>
</#macro>
<#macro cStepGroup title iterable=false iteration=0 iterationMax=10 labelAddIteration='#i18n{themecitelibre.labelAdd}' labelDelIteration='#i18n{themecitelibre.labelDelete}' help='' class='' id='' params=''>
<@cFormRow>
	<@cSection type='div' class='col step-group ${class!}' id=id params=params >
	    <a name="last_"></a>
        <@cRow>
            <#local headerClass>col px-3 <#if iterable && iteration gt 0>d-flex justify-content-between</#if></#local>
            <@cHeader class=headerClass>
                <@cTitle>${title!} <#if iteration gt 0>(${iteration+1})</#if></@cTitle>
                <#if iterable && iteration gt 0>
                    <@cSection type='div' class='text-right'>
                        <button class="btn-outline-danger" name="action_removeIteration"  value="rm_${iteration}" type="submit">
                            <i class="fa fa-trash" aria-hidden="true"></i> <small class="d-inline">${labelDelIteration}</small>
                        </button>
                    </@cSection>
                </#if>
            </@cHeader>
        </@cRow>
		<#if help!=''>
			<@cFormRow>
				<@cCol>
                    <@cAccordion id=iteration title='${i18n( "themecitelibre.msgHelpAbout", title )}' class='outline my-5' >${help}</@cAccordion>			
                </@cCol>
			</@cFormRow>
		</#if>
		<#nested>
		<#if iterable && iteration lte iterationMax>
            <@cFormRow>
                <@cCol class='px-4 px-sm-5 d-flex justify-content-end'>
                    <button class="btn-outline-sm" name="action_addIteration" value="add_${iteration}" type="submit">
                        <span class="fa fa-plus-circle"></span> ${labelAddIteration}
                    </button>
                </@cCol>	
            </@cFormRow>	
	    </#if>
	</@cSection>		
</@cFormRow>
</#macro>
<#-- cForm FORM        -->
<#macro cForm class='' id='' params='' name='' method='post' role='form' action='' >
<form <#if class!=''>class="${class}"</#if> <#if id!=''> id="${id!name}"</#if><#if action!=''> action="${action}"</#if><#if method!=''> method="${method}"</#if><#if name!=''> name="${name}"</#if><#if role!=''> role="${role}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</form>
</#macro>
<#-- cFormRow FORM ROW -->
<#macro cFormRow class='' id='' params=''>
<div class="form-row<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</div>
</#macro>
<#-- cLabel LABEL      -->
<#macro cLabel label='' class='label-control' id='' params='' for='' showLabel=true required=false >
<label class="<#if class!=''> ${class}</#if><#if !showLabel>"visually-hidden</#if>"<#if for!=''> for="${for!}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#if label!=''>${label!}<#else><#nested></#if> <#if required><span class="text-danger" tabindex="-1" title="#i18n{themecitelibre.labelMandatory}">*</span></#if>
</label>
</#macro>
<#-- cInput TEXT/SEARCH/PASSWORD/EMAIL/HIDDEN/DATE...         -->
<#macro cInput name class='' id='' type='text' value='' placeholder='' required=false disabled=false readonly=false pattern='' title='' maxlength=0 min=0 max=0 helpMsg='' errorMsg='' params=''>
<input type="${type!}" <#if type?lower_case !='hidden'>class="form-control-input<#if class!=''> ${class!}</#if><#if errorMsg!=''> is-invalid</#if><#if value !=''> notEmpty</#if>"</#if> name="${name!}" id="<#if id!=''>${id}<#else>${name!}</#if>" value="${value!}"<#if placeholder!=''> placeholder="${placeholder!}"</#if><#if title!=''> title="${title}"</#if><#if maxlength &gt; 0> maxlength="${maxlength}"</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if params!=''> ${params}</#if><#if pattern!=''> pattern=${pattern}</#if><#if min!=0> min="${min}"</#if><#if max!=0> max="${max}"</#if><#if required> required</#if><#if errorMsg!=''> is-invalid aria-invalid="true" aria-describedby="error_<#if id!=''>${id!}<#else>${name}</#if>"<#elseif helpMsg!=''> aria-describedby="help_<#if id!=''>${id!}<#else>${name}"</#if></#if>>
<#assign idMsg><#if id!=''>${id}<#else>${name!}</#if></#assign>
<#if helpMsg !=''><@cFormHelp idMsg helpMsg /></#if>
<#if errorMsg !=''><@cFormError idMsg errorMsg /></#if>
</#macro>
<#-- cTextArea        -->
<#macro cTextArea name class='form-control-textarea' id='' placeholder='' required=false disabled=false readonly=false title='' maxlength=0 helpMsg='' rows=0 errorMsg='' params=''>
<textarea class="<#if class!=''> ${class!}</#if><#if errorMsg!=''> is-invalid</#if>" name="${name!}" id="<#if id!=''>${id}<#else>${name!}</#if>" <#if placeholder!=''> placeholder="${placeholder!}"</#if><#if title!=''> title="${title}"</#if><#if maxlength &gt; 0> maxlength="${maxlength}"</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if params!=''> ${params}</#if><#if rows!=0>rows=${rows}</#if><#if required> required</#if><#if errorMsg!=''> is-invalid aria-invalid="true" aria-describedby="error_<#if id!=''>${id!}<#else>${name}</#if>"<#elseif helpMsg!=''> aria-describedby="help_<#if id!=''>${id!}<#else>${name}"</#if></#if>>
<#nested>
</textarea>
<#assign idMsg><#if id!=''>${id}<#else>${name!}</#if></#assign>
<#if helpMsg !=''><@cFormHelp idMsg helpMsg /></#if>
<#if errorMsg !=''><@cFormError idMsg errorMsg /></#if>
</#macro>
<#-- cField = FormGroup + label + nested input and else     -->
<#macro cField label='' labelClass='label-control' labelData='' for='' showLabel=true required=false class='' id='' params='' >
<div class="form-group<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#if label!=''>
<#assign fieldLabel>${label!} ${labelData!}</#assign>
<@cLabel label=fieldLabel class=labelClass for=for showLabel=showLabel required=required />
</#if>
<#nested>
</div>
</#macro>
<#-- cInputDropFiles                         -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                                  -->
<#-- id                                                     -->
<#-- params                                                 -->
<#macro cInputDropFiles name maxFiles=10 labelSelect='#i18n{themecitelibre.labelSelect}' labelSubmit='#i18n{themecitelibre.labelSubmit}' labelDelete='#i18n{themecitelibre.labelDelete}' required=false disabled=false helpMsg='' hasFiles=false errorMsg='' class='' id='' params='' >
<#local cId><#if id!=''>${id!}<#else>${name!}</#if></#local>
<div class="group-files">
    <div id="file-input-${cId!}" class="file-input fileinput-button">
        <input type="file" name="${name!}" id="${cId!}" multiple="multiple" class="form-control-input my-1 formsAsynchronousUploadHandler" aria-label="lb${cId!}">
        <label id="lb${cId!}" class="label-control"visually-hidden"visually-hidden-focusable" for="${cId!}">#i18n{themecitelibre.labelUploadFiles}</label>
        <p><@cIcon class='upload' label='#i18n{themecitelibre.labelSelect}' /></p>
        <p class="text-uppercase">#i18n{themecitelibre.labelDropFiles}
            <button class="btn btn-link file-input-text-js" name="action_doSynchronousUploadDocument" id="_form_upload_submit_${cId!}" value="_form_upload_submit_cI{id!}" type="submit" role="button">
                <span class="file-input-text-noscript text-uppercase" style="display: none;">&gt;${labelSubmit}</span>
                <span class="file-input-text-js text-uppercase">${labelSelect}</span>
            </button>
        </p>
    </div>	
    <input type="hidden" name="asynchronousupload.handler" value="formsAsynchronousUploadHandler">
    <div id="_file_error_box_cI{id!}" style="display: none;"></div>
    <div class="form-group" <#if !hasFiles>style="display:none;"</#if> id="_file_deletion_label_cI{id!}">
        <label>#i18n{themecitelibre.labelFileSent}</label>
        <div id="_file_deletion_${id}" class="col py-2 files-group">
            <#nested>
        </div>
        <div class="col">
            <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="selectAllcI{id!}">
                <label class="custom-control-label mt-4" for="selectAllcI{id!}">
                    #i18n{themecitelibre.labelAll} #i18n{themecitelibre.labelSelect}
                </label>
                <button id="rmAllcI{id!}" class="btn btn-danger" disabled="" name="action_doSynchronousUploadDocument" value="_form_upload_delete_cI{id!}" type="submit">
                    <i class="fa fa-trash" aria-hidden="true"></i> ${labelDelete}
                </button>
            </div>	
        </div>
    </div>
</div>
</#macro>
<#-- cInputDropFilesItem                     -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cInputDropFilesItem name label idx fileSize=0 ext='PDF' maxChars=24 urlDl='' urlRm=''>
<#local cUrlDl><#if urlDl=''>jsp/site/plugins/asynchronousupload/DoDownloadFile.jsp?fieldname=${name}&field_index=${idx}&fileName=${label}&asynchronousupload.handler=formsAsynchronousUploadHandler<#else>${urlDl}</#if></#local>
<#local cUrlRm><#if urlRm=''>#<#else>${urlRm!}</#if></#local>
<#local fileLabel><#if label?length gt maxChars>${label[0..20]}...<#else>${label}</#if></#local>
<div class="files-item" id="_file_uploaded_${name}">
    <label class="files-item-label" for="_form_upload_checkbox_${name}">
        <input class="" type="checkbox" name="_form_upload_checkbox_" id="_form_upload_checkbox_${name}">
        <a class="files-item-link" title="${label}" href="${cUrlDl}" data-type="${ext!}" data-img="">
            <span>${fileLabel}</span>
        </a>
        <a href="${cUrlRm!}" class="text-danger deleteSingleFile" fieldname="${name}" handlername="formsAsynchronousUploadHandler" index="${idx}"> 
            <i class="fa fa-times fa-fw"></i> 
        </a>
        <br>
        <small>${fileSize} #i18n{themecitelibre.labelFileUnit}</small>
     </label>
</div>
</#macro>
<#-- cInputGroup                             -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cInputGroup class='' id='' params='' >
<div class="input-group<#if class!=''> ${class!}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#nested>
</div>
</#macro>
<#-- cInputGroupAddon                        -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cInputGroupAddon append=true addonText='' class='' id='' params='' >
<div class="input-group-<#if append>append<#else>prepend</#if><#if class!=''> ${class!}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
    <#if addonText !=''><@cInputGroupAddonText>${addonText!}</@cInputGroupAddonText></#if>
    <#nested>
</div>
</#macro>
<#-- cInputGroupAddonText                    -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cInputGroupAddonText tag='span' class='' id='' params='' >
<${tag} class="input-group-text<#if class!=''> ${class!}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
    <#nested>
</${tag}>
</#macro>
<#-- cRadio RADIO BUTTON                     -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cRadio name label class='' id='' value='' params='' inline=false disabled=false readonly=false checked=false required=false>
<#if id=''><#assign cId=name + random() ><#else><#assign cId=id ></#if>    
<div class="form-check<#if inline> form-check-inline</#if><#if class!=''> ${class}</#if>">
    <input type="radio" id="${cId!}" name="${name!}" class="form-check-input" <#if value!=''>value="${value}"</#if><#if disabled> disabled</#if><#if required> required</#if><#if readonly> readonly</#if><#if checked> checked</#if>>
    <label class="form-check-label" for="${cId!}">${label!}</label>
</div>
</#macro>
<#-- cCheckbox CHECKBOX                      -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cCheckbox name label class='' id='' value='' params='' inline=false disabled=false readonly=false checked=false required=false>
<#if id=''><#assign cId=name + rand( .now?long?number ) ><#else><#assign cId=id ></#if>  
<div class="form-check form-switch<#if inline> form-check-inline</#if><#if class!=''> ${class}</#if>">
    <input type="checkbox" id="${cId!}" name="${name!}" class="form-check-input" <#if value!=''>value="${value}"</#if><#if disabled> disabled</#if><#if required> required</#if><#if readonly> readonly</#if><#if checked> checked</#if>>
    <label class="form-check-label" for="${cId!}">${label!}</label>
</div>
</#macro>
<#-- cSelect SELECT                          -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cSelect name class='form-input-select' id='' params='' multiple=false disabled=false readonly=false required=false helpMsg='' errorMsg=''>
<select name="${name!}" class="<#if class!=''>${class!}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if multiple> multiple</#if>>
<#nested>
</select>
<#if  helpMsg!=''><@cFormHelp label=helpMsg id=id /></#if>
<#if  errorMsg!=''>
<#assign idErr><#if id!=''>${id}<#else>${name!}</#if></#assign>
<@cFormError label=errorMsg id=idErr />
</#if>
</#macro>
<#-- cOption SELECT                          -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cOption label value class='' selected=false disabled=false>
<option <#if class!=''>class="${class}</#if> value="${value!}"<#if selected> selected</#if><#if disabled> disabled</#if>>${label!}</option>
</#macro>
<#-- cOptgroup SELECT                        -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cOptgroup label class='' disabled=false>
<optgroup label="${label!}" <#if class!=''>class="${class}</#if><#if disabled> disabled</#if>>
<#nested>
</optgroup>
</#macro>
<#-- cSelectItems                            -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cSelectItems name id='' class='' items='' default_value='' size='' sort=false multiple=0 params='' title='' disabled=false tabIndex=0 maxLength=0 mandatory=false>
<#if propagateMandatory?? && propagateMandatory ><#local mandatory = true /></#if>
<select id="${id}" name="${name}" class="form-select<#if size!=''> form-control-input form-control-${size}</#if><#if class!=''> ${class}</#if>" <#if (multiple &gt; 0)>multiple size="${multiple}"</#if><#if (tabIndex &gt; 0)> tabindex="${tabIndex}"</#if><#if params!=''> ${params}</#if><#if title!=''> title="${title}"</#if><#if mandatory> required</#if><#if disabled> disabled</#if>>
<#if items?has_content>
<#if sort=true>
<#list items?sort_by("name") as item>
<#if default_value="${item.code}">
	<option selected="selected" title="${item.name}" value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
<#else>
	<option value="${item.code}" title="${item.name}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
</#if>
</#list>
<#else>
<#if maxLength gt 0>
	<#list items as item>
	<#if maxLength < item.name?length >
		<#assign item_new = "..." + "${item.name?substring(item.name?length-maxLength+3)}" >
	<#else>
		<#assign item_new = "${item.name}">
	</#if>
	<#if default_value="${item.code}">
		<option selected="selected" title="${item.name}" value="${item.code}" >${item_new}</option>
	<#else>
		<option title="${item.name}" value="${item.code}" >${item_new}</option>
	</#if>
	</#list>
<#else>
	<#list items as item>
	<#if default_value="${item.code}">
		<option selected="selected" title="${item.name}" value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
	<#else>
		<option title="${item.name}" value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
	</#if>
	</#list>
</#if>
</#if>
<#else>
<#nested>
</#if>
</select>
</#macro>
<#-- cFormHelp                               -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cFormHelp id label class='text-muted' params=''>
<small id="help_${id!}" class="form-text <#if class!=''> ${class!}</#if>"<#if params!=''> ${params!}</#if>>${label!}</small>
</#macro>
<#-- cFormError                              -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cFormError id label class='' params=''>
<div class="invalid-feedback<#if class!=''> ${class!}</#if>" role="alert" id="error_${id!}"<#if params!=''> ${params!}</#if>>${label!}</div>
</#macro>
<#macro cPasswordCheck id >
<#local checkMsg><span class="charlength"><i class="fa fa-check"></i> #i18n{themecitelibre.labelNbChars}</span> <span class="uppercase"><i class="fa fa-check"></i> #i18n{themecitelibre.labelNbUppercase} </span> <span class="digit"><i class="fa fa-check"></i> #i18n{themecitelibre.labelNbDigit}</span></#local>
<@cFormHelp id checkMsg />
</#macro>
<#-- cBtn BUTTON                             -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- label                                   -->
<#-- class                                   -->
<#-- id                                      -->
<#-- params                                  -->
<#-- type                                    -->
<#-- nestedPos                               -->
<#-- disabled                                -->
<#macro cBtn label class='btn-solid-reg' id='' params='' type='submit' nestedPos='before' disabled=false>
<button class="${class!}" type="${type!}"<#if id!=''> id="${id!}"</#if><#if params!=''>${params!}</#if><#if disabled> disabled</#if>> 
    <#if nestedPos='before'><#nested></#if><#if label!=''><span class="btn-label">${label!}</span></#if><#if nestedPos='after'><#nested></#if>
</button>
</#macro>
<#-- cLink                                  -->
<#-- -------------------------------------- -->
<#-- Attributes                             -->
<#-- -------------------------------------- -->
<#-- href: Mandatory                        -->
<#-- label: Mandatory                       -->
<#-- title:                                 -->
<#-- nestedPos: 'after'                     -->
<#-- target:                                -->
<#-- class:                                 -->
<#-- id:                                    -->
<#-- params:                                -->
<#macro cLink href label title='' nestedPos='after' target='' class='' id='' params=''>
<a href="${href!}" <#if id!=''> id="${id!}"</#if> <#if class !='' >class="${class!}"</#if> title="<#if title!=''>${title!}<#else>${label!}</#if><#if target='_blank'> #i18n{themecitelibre.newWindowLink}</#if>"<#if target!=''> target="${target}"</#if><#if params!=''> ${params}</#if> > 
    <#if nestedPos!='after'><#nested></#if>
    <span class="link-label">${label!}</span> 
    <#if nestedPos='after'> <#nested></#if>
</a>
</#macro>
<#-- cBtnImg BUTTON                          -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- img                                     -->
<#-- title                                   -->
<#-- type                                    -->
<#-- class   default action                  -->
<#-- id                                      -->
<#-- params                                  -->
<#-- nestedPos                               -->
<#-- disabled                                -->
<#macro cBtnImg src title class='action' id='' type='submit' params='' imgPos='before' disabled=false>
<@cBtn label='' class='${class!} btn-img' type=submit  disabled=disabled>
    <@cFigure caption=''>
        <#if imgPos='before'>
            <@cImg src="${src!}" title="${title!}" alt='' />
        </#if>
        <@cFigCaption>
            <#nested>
        </@cFigCaption>
        <#if imgPos='after'>
            <@cImg src="${src!}" title="${title!}" alt='' class='after' />
        </#if>
    </@cFigure>
</@cBtn>
</#macro>
<#-- cBtnGroup GROUP BUTTONS                 -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- label   Obligatoire                     -->
<#-- class   default ''                      -->
<#-- id                                      -->
<#-- type    value: '' / vertical            -->
<#-- params                                  -->
<#macro cBtnGroup label class='' id='' type='' params='' >
<#local btnClass>btn-group<#if type='vertical'>-vertical</#if><#if class!=''> ${class}</#if></#local>
<@cSection type='div' class=btnClass id=id params='${params} role="group" aria-label="${label}"'>
    <#nested>
</@cSection>
</#macro>
<#-- cBtnToolbar TOOLBAR OF GROUP BUTTONS    -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- class   default action                  -->
<#-- id                                      -->
<#-- params                                  -->
<#macro cBtnToolbar label type='' class='' id='' params='' >
<#local btnClass>btn-toolbar<#if type='vertical'>-vertical</#if><#if class!=''> ${class}</#if></#local>
<@cSection type='div' class=btnClass id=id params='${params} role="toolbar" aria-label="${label}"'>
    <#nested>
</@cSection>
</#macro>
<#-- END FORM                                               -->
<#-- COMPONENTS                                             -->
<#-- icon ICON                                                           
Icons change prefix if needed. FontAwesome 5 is the default library 
 -->
<#macro cIcon label class id='' params='' prefix='fas fa-' type='span'>
<@cText type=type class='${prefix}${class!"check"}' id=id params='title="${label}" aria-hidden="true" ${params}'>
<#nested>
</@cText>
</#macro>
<#-- cList                          -->
<#-- items: Mandatory               -->
<#-- type: default / more / files   -->
<#-- itemsShown: 0                  -->
<#-- labelMore: 'VOIR PLUS'         -->
<#-- class:                         -->
<#-- id:                            -->
<#-- params:                        -->
<#macro cList items type='default' itemsShown=0 labelMore=i18n("themecitelibre.labelShowMore") class='' id='' params=''>        
<ul class="list-${type!}<#if class!=''> ${class}</#if>" <#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
    <#if items?has_content>
        <#list items as i>
            <li class="<#if i.class?? && i.class !=''>${i.class}</#if><#if type='more' && i?index &gt; itemsShown>extra hidden</#if>">
                <a class="d-flex justify-content-between" href="${i.url!'return false;'}" title="${i.title}" <#if i.target !=''> target="${i.target}"</#if> >
                    <span>${i.title!} ${i?index}</span>
                    <#if type='files'>
                    <div class="files-info">
                        <small>${i.size!}</small>
                        <span>${i.type!}</span>
                    </div>    
                    </#if>
                </a>
            </li>
        </#list>
    </#if>
    <#nested>
    <#if type ='more'>
        <li class="more">
            <@cLink href='#' nestedPos='before' class='text-danger btn-more' label=labelMore title=labelMore >
                <@cIcon label=labelMore class='plus' /> 
            </@cLink>
        </li>
    </#if> 
</ul>
</#macro>  
<#-- cInfoStep                          -->
<#-- Macro for Editorials Contents      -->
<#macro cInfoStep steps type='' haspicto=false hasidx=false title=false showMore=0 labelMore=i18n("themecitelibre.labelShowMore") class='' id='' params=''>
<div class="info-step<#if type!=''> ${type}</#if>">
    <ol class="<#if hasidx> list-idx</#if><#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
    <#if steps?has_content>
        <#list steps as step>
        <#if type='pie'>
            <li class="step-${step?index + 1}<#if step.status!=''> ${step.status!}</#if>">
                <span>${step?index + 1} - ${step.title!}</span>
            </li>
        <#else>
            <li>
                <#if haspicto>
                    <figure class="p-3" data-idx="${step?index + 1}" aria-hidden="true">
                        <img src="${step.url!}" class="img-fluid" title="${step.title!}" alt="${step.title!}" aria-hidden="true">
                    </figure>
                <#else>
                    <div class="idx" data-idx="${step?index + 1}" aria-hidden="true">
                        <span>${step?index + 1}</span>
                    </div>
                </#if>
                <#if step.content??>
                    <#if showMore gt 0>
                        <#local content>
                        <#if step.content?length gt showMore>
                            <#assign truncated=step.content?truncate_w(showMore, '') >
                            ${truncated}<span class="ellipsis">...</span>
                            <span class="extra"visually-hidden">${step.content?remove_beginning(truncated)}</span>
                            <span class="d-block text-center mt-2">
                                <@cLink href='#' nestedPos='before' class='btn-infostep-more main-color text-decoration-none h6' label=labelMore title=labelMore >
                                    <@cIcon label=i18n("portal.util.labelBack") class='angle-up hidden' />
                                </@cLink>
                            </span>
                        <#else>
                        ${step.content}
                        </#if>
                        </#local>
                    </#if>
                </#if>
                <#if title>
                    <h2 id="step-title-${step?index + 1}" class="h3 text-center font-weight-bold mt-2">${step.title!}</h2>
                    <#if step.content??><p class="infostep-more">${content!}</p></#if>
                <#else>
                    <p id="step-title-${step?index + 1}" class="mt-2">${step.title!}<#if step.content??> ${content!}</#if></p>
                </#if>
            </li>
        </#if>
        </#list>
    </#if>
    <#nested>    
    </ol>
</div>
</#macro>  
<#-- cContentFrame      -->
<#-- title: Mandatory   -->
<#-- class:             -->
<#-- id:                -->
<#-- params:            -->
<#-- Macro for Editorials Contents   -->
<#macro cContentFrame title class='' id='' params=''>
<div class="content-frame ${class}" <#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if> >
    <#if title?? && title !=''><h2>${title}</h2></#if>
    <#nested>    
</div>
</#macro> 
<#-- cCard -->
<#macro cCard title='' titleClass='' titleUrl='' subtitle='' subtitleClass='' class='' id='' img='' header='' headerClass='' headerImg='' subHeader='' subHeaderClass='' footer='' footerClass='' orientation='v' shadow=true params=''>
<#if orientation='v'>
<div class="card ${class!}<#if !shadow> no-shadow</#if>" ${params!}>
    <#if header!=''><div class="card-header<#if headerClass !=''> ${headerClass}</#if><#if headerImg!=''> card-header-img</#if>"<#if headerImg!=''>style="background-image:url(${headerImg});"</#if>><span>${header!}</span></div></#if>
    <#if subHeader!=''><div class="card-sub-header<#if subHeaderClass !=''> ${subHeaderClass}</#if>">${subHeader!}</div>
    </#if>
    <#if img!=''><figure><img src="${img!}" class="card-img-top" alt="..."></figure></#if>
    <div class="card-body">
        <#if title!=''><h5 class="card-title<#if titleClass !=''> ${titleClass}</#if>"><#if titleUrl!=''><a href="${titleUrl}" class="card-title-link" title=""></#if>${title}<#if titleUrl!=''></a></#if></h5></#if>
        <#if subtitle!=''><h6 class="card-subtitle mb-2 text-muted<#if subtitleClass !=''> ${subtitleClass}</#if>">${subtitle}</h6></#if>
        <#nested>
    </div>
    <#if footer!=''><div class="card-footer text-muted<#if footerClass !=''> ${footerClass}</#if>">${footer!}</div></#if>
</div>
<#else>
<div class="card ${class!}" ${params!}>
    <div class="row no-gutters">
        <#if img!=''>
        <div class="col-md-4">
            <img src="${img!}" class="card-img" alt="...">
        </div>
        </#if>
        <div class="col-md-8">
            <div class="card-body">
                <#if title!=''><h5 class="card-title">${title}</h5></#if>
                <#if subtitle!=''><h6 class="card-subtitle mb-2 text-muted">${subtitle}</h6></#if>
                <#nested>
            </div>
            <#if footer!=''>
            <div class="card-footer text-muted">${footer!}</div>
        </#if>
        </div>
    </div>
</div>
</#if>    
</#macro>
<#-- cCardLayout -->
<#-- type: group / deck / columns -->
<#macro cCardLayout type='group' class='' id='' params=''>
<div class="card-${type!}<#if class !='' > ${class!}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
    <#nested>
</div>
</#macro>
<#-- cAccordion             -->
<#-- title: Mandatory       -->
<#-- id: Mandatory          -->
<#-- class:    ''           -->
<#-- titleClass:''          -->
<#-- params: ''             -->
<#-- header: ''             -->
<#-- border:  true          -->
<#-- state:  true           -->
<#-- hasCollapse:  true     -->
<#macro cAccordion title id class='' titleClass='' subTitle='' subTitleClass='' params='' header='' border=false state=true hasCollapse=true>
<div class="accordion" id="acc${id!}">
    <div class="card ${class!}<#if border> with-border</#if><#if subTitle !=''> with-subtitle</#if>" ${params!} >
        <div class="card-header" tabindex="0" data-bs-toggle="collapse" data-bs-target="#collapseAcc${id}" >
            <#if class?starts_with('info')>
                <div class="card-header-info">
                    <div class="rounded-bg-icon">
                        <@cIcon class='exclamation-circle' label='#i18n{themecitelibre.labelInfo}' />
                    </div>    
                    <h5<#if titleClass !=''> class="${titleClass}"</#if> id="headingAcc${id}">${title}</h5>
                    <#if header !=''>${header}</#if>
                </div>
                <#if hasCollapse><span class="card-header-separator ml-auto mr-4"></span></#if>
            <#elseif class?starts_with('outline')>
                <div class="card-header-prepend">
                    <div class="rounded-bg-icon">
                        <@cIcon class='exclamation-circle' label='#i18n{themecitelibre.labelInfo}' />
                    </div>    
                </div>    
                <h5<#if titleClass !=''> class="${titleClass}"</#if> id="headingAcc${id}">${title}</h5>
                 <#if header !=''>${header}</#if>
                <#if hasCollapse><span class="card-header-separator ml-auto mr-4"></span></#if>
            <#else>
                <h5 class="card-title<#if titleClass !=''> ${titleClass}</#if>" id="headingAcc${id}">${title}</h5>
                <#if header !=''>${header}</#if>
            </#if>
            <#if hasCollapse>
            <button class="btn btn-accordion btn-link main-color<#if !state> collapsed</#if>" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAcc${id}" aria-expanded="<#if state>true<#else>false</#if>" aria-controls="collapseAcc${id}">
                <span class="visually-hidden">${title}</span>
                <@cIcon class='angle-down' label='' />
             </button>
            </#if>
            <#if subTitle !=''><p class="card-subtitle w-100<#if subTitleClass !=''> ${subTitleClass}</#if>">${subTitle}</p></#if>
        </div>
        <#if hasCollapse>
            <div id="collapseAcc${id}" class="collapse <#if state>show</#if>" aria-labelledby="headingAcc${id}" data-bs-parent="#acc${id!}">
                <div class="card-body">
                    <#nested>
                </div>
            </div>
            <div class="card-footer d-block d-sm-none text-center">
                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseAcc${id}" aria-expanded="<#if state>true<#else>false</#if>" aria-controls="collapseAcc${id}">
                    <@cIcon class='arrow-bottom' label='' />
                </button>	
            </div>
        </#if>
    </div>
</div>
</#macro>
<#macro cAlert title='#i18n{themecitelibre.labelWarning}' dismissible=true class='primary' outline=false id='' params='' >
<#local localIconName='info' />
<#local ariaLabel='status' />
<#if class?starts_with('danger')>
    <#local localIconName='exclamation' />
    <#local ariaLabel='alert' />
<#elseif class?starts_with('warning')>
    <#local localIconName='exclamation' />
    <#local ariaLabel='alert' />
<#elseif class?starts_with('success')>
    <#local localIconName='check' />
    <#local ariaLabel='status' />
</#if>
<div class="alert<#if outline> alert-outline </#if> alert-${class}<#if dismissible> alert-dismissible</#if>" role="${ariaLabel}">
    <div class="alert-icon"><div class="rounded-bg-icon"><@cIcon class=localIconName label='#i18n{themecitelibre.labelInfo}' /></div></div>
    <div class="alert-text"><#if title !=''>${title}<#else><#nested></#if></div>
    <#if dismissible><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="#i18n{themecitelibre.labelClose}"></button></#if>
</div>
</#macro>
<#macro cModal title id size='' static=false pos='centered' role='' type='' scrollable=false dismissible=true dismissLabel='#i18n{themecitelibre.labelClose}' footer='' class='' params=''>
<div class="modal cmodal fade<#if class!=''> ${class}</#if>" id="${id}Modal" <#if static>data-backdrop="static" </#if>tabindex="-1" role="dialog" aria-labelledby="modal${id}Title" aria-hidden="true" <#if params!=''> ${params}</#if>>
    <div class="modal-dialog <#if pos!=''>modal-dialog-${pos} </#if> <#if scrollable>modal-dialog-scrollable</#if><#if size!=''>modal-${size}</#if>"<#if role !=''> role="${role}"</#if>>
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal${id}Title">${title}</h5>
                <#if dismissible>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <@cIcon class='close' label='close' />
                    </button> 
                </#if>
            </div>
            <div class="modal-body">
                <#nested>
            </div>
            <div class="modal-footer">
                ${footer!}
                <#if dismissible>
                    <button type="button" class="btn <#if type='info'>btn-link-primary<#else>btn-link-action</#if>" data-dismiss="modal">${dismissLabel}</button>
                </#if>
            </div>
        </div>
    </div>
</div>
</#macro>
<#macro cCarousel id indicatorSize=1 controls=false labelPrev='' labelNext='' class='' params=''>
<div id="${id!}" class="carousel carousel-themed slide" data-ride="carousel">
<#if indicatorSize &gt; 1>
    <ol class="carousel-indicators pagination">
    <#list 0..( indicatorSize - 1) as idx>
        <li class="page-item<#if idx=0> active</#if>" data-target="#${id!}" data-slide-to="${idx}"><span class="page-link">${idx+1}</span></li>
    </#list>
    </ol>
</#if>
    <div class="carousel-inner">
    <#nested>
    </div>
    <#if controls>
    <a class="carousel-control-prev" href="#${id!}" role="button" data-slide="prev">
        <span class="carousel-bg-control">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">${labelPrev}</span>
        </span>
    </a>
    <a class="carousel-control-next" href="#${id!}" role="button" data-slide="next">
        <span class="carousel-bg-control">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">${labelNext}</span>
        </span>
    </a>
    </#if>
</div>
</#macro>
<#macro cCarouselItem img active=false alt='' title='' subtitle='' class='' params=''>
<div class="carousel-item<#if active> active</#if><#if class !=''> ${class}</#if>"<#if params !=''> ${params}</#if>>
    <img src="${img!}" class="d-block w-100" alt="${alt!'...'}">
    <div class="carousel-caption d-none d-md-block">
        <h5>${title}</h5>
        <#if subtitle !=''><p>${subtitle}</p></#if>
    </div>
</div>
</#macro>  
<#-- cPAGINATION                                            -->
<#-- --------------------------------------                 -->
<#-- Attributes                                             -->
<#-- --------------------------------------                 -->
<#-- class                                                  -->
<#-- id                                                     -->
<#-- params                                                 -->
<#macro cPagination paginator label='Pagination' class='' id='' params='' >
<nav aria-label="${label!}" <#if id!=''> id="${id}"</#if><#if class!=''> class="${class}"</#if><#if params!=''> ${params}</#if> >
<#if (paginator.pagesCount > 1) >
	<@cPaginationLinks paginator=paginator class=class />
</#if>
</nav>
</#macro>
<#macro cPaginationLinks paginator class=''>
<#local nbLinkPagesToDisplay = 10 />
<#local offsetPrev = nbLinkPagesToDisplay / 2 />
<#local offsetNext = nbLinkPagesToDisplay / 2 />
<#if ( paginator.pageCurrent <= nbLinkPagesToDisplay - offsetPrev )>
	<#local offsetPrev = paginator.pageCurrent - 1 />
	<#local offsetNext = nbLinkPagesToDisplay - offsetPrev />
<#elseif ( paginator.pageCurrent + offsetNext > paginator.pagesCount )>
	<#local offsetNext = paginator.pagesCount - paginator.pageCurrent />
	<#local offsetPrev = nbLinkPagesToDisplay - offsetNext />
</#if>
<ul class="pagination<#if class!=''> ${class}</#if>">
<#if ( paginator.pageCurrent - offsetPrev > 1 )>
	<li class="page-item">
		<a class="page-link" href="${paginator.firstPageLink?xhtml}" title="${paginator.labelFirst}">
			<svg xmlns="http://www.w3.org/2000/svg" width="9.638" height="15.153" viewBox="0 0 9.638 15.153">
				<g transform="translate(8.279 13.676) rotate(180)">
					<g transform="translate(0 0)">
						<path class="a" d="M1.309,0,0,1.423,4.3,6.1,0,10.776,1.309,12.2,6.92,6.1Z"/>
					</g>
				</g>
			</svg>
		</a>
	</li>
</#if>
<#if (paginator.pageCurrent > 1) >
	<li class="page-item">
		<a class="page-link" href="${paginator.previousPageLink?xhtml}" title="#i18n{themecitelibre.labelPrev}">
			<svg xmlns="http://www.w3.org/2000/svg" width="9.638" height="15.153" viewBox="0 0 9.638 15.153">
				<g transform="translate(8.279 13.676) rotate(180)">
					<g transform="translate(0 0)">
						<path class="a" d="M1.309,0,0,1.423,4.3,6.1,0,10.776,1.309,12.2,6.92,6.1Z"/>
					</g>
				</g>
			</svg>
		</a>
	</li>
<#else>
	<li class="page-item disabled">
		<a class="page-link" href="${paginator.firstPageLink?xhtml}" title="${paginator.labelFirst}">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9.638 15.153">
				<g transform="translate(8.279 13.676) rotate(180)">
					<path class="a" d="M1.309,0,0,1.423,4.3,6.1,0,10.776,1.309,12.2,6.92,6.1Z"/>
				</g>
			</svg>
		</a>
	</li>
</#if>
<#if ( paginator.pageCurrent - offsetPrev > 1 )>
	<li class="page-item group">
		<a class="page-link" href="${(paginator.pagesLinks?first).url?xhtml}" title="#i18n{themecitelibre.labelNextGroup}"><strong>...</strong></a>
	</li>
</#if>
<#list paginator.pagesLinks as link>
	<#if ( link.index == paginator.pageCurrent )>
		<li class="page-item active" aria-current="page">
			<a class="page-link" title="${link.name} - active" href="${link.url?xhtml}">${link.name}</a>
		</li>
	<#else>
		<li class="page-item">
			<a class="page-link" title="${link.name}" href="${link.url?xhtml}">${link.name}</a>
		</li>
	</#if>
</#list>
<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount) >
	<li class="page-item group">
		<a class="page-link" href="${(paginator.pagesLinks?last).url?xhtml}" title="#i18n{themecitelibre.labelNextGroup}" >
			<strong>...</strong>
		</a>
	</li>
</#if>
<#if (paginator.pageCurrent < paginator.pagesCount) >
	<li class="page-item">
		<a class="page-link" href="${paginator.nextPageLink?xhtml}" title="#i18n{themecitelibre.labelNext}">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9.638 15.153">
				<g transform="translate(1.359 1.477)">
					<path class="a" d="M1.309,0,0,1.423,4.3,6.1,0,10.776,1.309,12.2,6.92,6.1Z"/>
				</g>
			</svg>
		</a>
	</li>
	<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount) >
		<li class="page-item">
			<a class="page-link" href="${paginator.lastPageLink?xhtml}" title="${paginator.labelLast}">
				${paginator.labelLast}
			</a>
		</li>
	</#if>
<#else>
	<li class="page-item disabled">
		<a class="page-link" href="${paginator.lastPageLink?xhtml}" title="${paginator.labelLast}" >
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9.638 15.153">
				<g transform="translate(1.359 1.477)">
					<path class="a" d="M1.309,0,0,1.423,4.3,6.1,0,10.776,1.309,12.2,6.92,6.1Z"/>
				</g>
			</svg>
		</a>
	</li>
</#if>
</ul>
</#macro>
<#-- MACRO cTABS -->
<#macro cTabs navigation=true id='' class='' params='' >
<#if navigation><nav></#if>
<ul class="nav nav-tabs<#if class!=''> ${class!}</#if>"<#if !navigation> role="tablist"</#if><#if id !=''> id="${id!}"</#if><#if params!=''> ${params!}</#if> >
  <#nested>
</ul>
<#if navigation></nav></#if>
</#macro>
<#-- MACRO cTAB -->
<#macro cTab url id='' active=false navigation=true disabled=false class='' params=''>
  <li class="nav-item" <#if !navigation> role="presentation"</#if>>
    <<#if navigation>a<#else>button type="button"</#if> id="<#if id=''>tab_${url!?remove_beginning("#")}<#else>${id}</#if>" class="nav-link <#if !navigation>btn</#if> <#if active>active</#if> <#if disabled>disabled</#if><#if class!=''> ${class!}</#if>"<#if !navigation> data-toggle="tab" role="tab"  </#if><#if disabled> disabled tabindex="-1" aria-disabled="true"</#if> <#if active>tabindex=0</#if> href="${url!}">
        <#nested>
    </<#if navigation>a<#else>button</#if>>
  </li>
</#macro>
<#-- MACRO cTABCONTENT -->
<#macro cTabContent id class='' params=''>
<div class="tab-content<#if class!=''> ${class!}</#if>" id="${id}" ${params!} >
    <#nested>
</div>
</#macro>
<#-- MACRO cTABPANE -->
<#macro cTabPane id active=false disabled=false class='' params=''>
<div class="tab-pane fade <#if active>show active</#if><#if disabled> disabled</#if><#if class!=''> ${class!}</#if>"<#if disabled>disabled aria-disabled="true"</#if> id="${id}" role="tabpanel" aria-labelledby="tab_${id}" ${params!}>    
    <#nested>
</div>
</#macro>
<#-- MACRO cConsentTac : Consent RGPD needs Tarteaucitron library - https://tarteaucitron.io/fr /       -->
<#-- Attributes                                                                                         -->
<#-- privacyLink=''                                                                                     -->
<#-- denyAll='false' Show / Hide Denyall button                                                         -->
<#-- cookieMenu=''                                                                                      -->
<#-- cookiePolicyLink=''                                                                                -->
<#-- hashtag='cookiecitelibrepack'                                                                           -->
<#-- cookiename='cookiecitelibrepack'                                                                        -->
<#macro cConsentTac title='This site' privacyLink='' showIcon=false iconPos='bottomRight' denyAll=false cookieMenu='Cookie management' cookiePolicyLink='4' hashtag='cookiepolicycitelibrepack' cookiename='cookiecitelibrepack' nocredit=false>
<script src="js/tarteaucitron/tarteaucitron.js"></script>
<script>
tarteaucitron.init({
    "privacyUrl": "${privacyLink}", /* Privacy policy url */
    "hashtag": "#${hashtag}",       /* Open the panel with this hashtag */
    "cookieName": "${cookiename}",  /* Cookie name */
    "orientation": "bottom",        /* Banner position (top - bottom) */
    "showAlertSmall": false,        /* Show the small banner on bottom right */
    "cookieslist": true,            /* Show the cookie list */
    "adblocker": true,             /* Show a Warning if an adblocker is detected */
    "AcceptAllCta" : true,          /* Show the accept all button when highPrivacy on */
    "DenyAllCta" : ${denyAll?c},           /* Show the Deny all button when highPrivacy on */
    "highPrivacy": true,            /* Disable auto consent */
    "handleBrowserDNTRequest": true, /* If Do Not Track == 1, disallow all */
    "removeCredit": ${nocredit?c},          /* Remove credit link */
    "moreInfoLink": true,           /* Show more info link */
    "useExternalCss": true,         /* If false, the tarteaucitron.css file will be loaded */        
    "readmoreLink": "${cookiePolicyLink}", /* Change the default readmore link */
    "mandatory": true,             /* Show a message about mandatory cookies */
    "showIcon": ${showIcon?c},
    "iconPosition": "${iconPos}",
});
window.tarteaucitronForceLanguage = 'en';
<#nested>
</script>
</#macro>
<#-- Services List for @cConsentTac https://tarteaucitron.io/fr/install/                                                -->
<#-- Refer to doc for correct use with embed for services. Most of them need to upldate your js/html source code :      -->
<#-- Most used: twitter, addThis, dailymotion, facebook, googlefonts, slideshare, vimeo,  youtube             -->
<#-- MACRO cConsentTacService :            -->
<#-- Attributes                            -->
<#-- code: ''                      -->
<#macro cConsentTacService code=''>
<#nested>
(tarteaucitron.job = tarteaucitron.job ||   []).push('${code}');
</#macro>
<#-- MACRO cConsentTacServiceMatomo :                                             -->
<#-- Attributes                                                                   -->
<#-- id: 0                                                                        -->
<#-- host: https://mtmdsin.apps.paris.fr/matomo/                                  -->
<#-- matomo: 0=use nested to get Matomo params  / 1  use id and host macro params -->
<#macro cConsentTacServiceMatomo id=0 host='https://mtmdsin.apps.paris.fr/matomo/'>
<@cConsentTacService code='matomohightrack'>
tarteaucitron.user.matomoId = ${id};
tarteaucitron.user.matomoHost = '${host}';
</@cConsentTacService>
</#macro>
<#-- MACRO cErrorMessage -->
<#-- Attributes          -->
<#-- title  : mandatory  -->
<#-- text   : mandatory  -->
<#-- linkUrl: ''         -->
<#-- linkLabelUrl: ''    -->
<#-- id: ''              -->
<#-- class: ''           -->
<#-- params: ''          -->
<#macro cErrorMessage title text linkUrl='' linkLabelUrl='' id='' class='text-center' params=''>
<#local linkLabelUrl>${linkLabelUrl}</#local>
<@cContainer hasHeader=false>
  <@cRow class='align-items-center justify-content-center'>
    <@cCol class='col mt-5 pt-5 ${class!}' id=id params=params >
      <@cTitle class='main-info-color font-black'>
        <@cIcon class='info' label=title params='style="fill:var( --main-info-color);width:64px;height:64px;"'/> ${title}
      </@cTitle>
      <@cTitle level=2 class='py-5 font-extra-bold dark-color'>${text}</@cTitle>
      <#nested>
      <@cText class="text-center">
      <#if linkUrl !=''>
        <#if linkLabelUrl=''>
            <#local linkLabelUrl>#i18n{portal.util.labelBackHome}</#local>
        </#if>
        <@cLink href=linkUrl label=linkLabelUrl  class='btn btn-action mt-5' />
      </#if>
      </@cText>
    </@cCol>
  </@cRow>
</@cContainer>
</#macro>
<#-- cToastr                                 -->
<#-- --------------------------------------  -->
<#-- Attributes                              -->
<#-- --------------------------------------  -->
<#-- infos                                   -->
<#-- warnings                                -->
<#-- errors                                  -->
<#-- msg                                     -->
<#-- msgType                                 -->
<#macro cToastr infos warnings errors msg='' msgType='info'>
<script>
$( function(){
<#if warnings?has_content>
<#list warnings as warning >
    toastr.warning("${warning.message}");
</#list>	
</#if>
<#if errors?has_content>
<#list errors as error >
    toastr.error("${error.message}");
</#list>	
</#if>
<#if infos?has_content>
<#list infos as info >
    toastr.info("${info.message}");
</#list>	
</#if>
<#if msg !=''>
<#if msgType='info'>
    toastr.info("${msg}");
</#if>
<#if msgType='warning'>
    toastr.warning("${msg}");
</#if>
<#if msgType='danger'>
    toastr.warning("${msg}");
</#if>
</#if>
});
</script>
</#macro>
<#-- THEME DATE PICKER COMPONENT        -->
<#macro getThemeDatePicker idField format='' showFormat='' minDate='' maxDate='' defaultDate='' >
<script>
$( function() {
<#if showFormat == ''>let showFormat${idField} = getFlatPickerDateFormat( browserCurrentLocale );<#else>let showFormat${idField} = '${showFormat}';</#if>
<#-- The server parses dates on a per locale basis. The formats here much match those specified by lutece.format.date.short -->
<#if format == ''>let dtFormat${idField}='Y-m-d H:i:S'; // Default for most DB <#else> let dtFormat${idField}='${format}'; </#if>
$('#${idField}').flatpickr( { allowInput: true, enableTime: false, altInput: true, altFormat: showFormat${idField}, dateFormat: dtFormat${idField},"locale": browserLang<#if defaultDate !=''>,defaultDate : "${defaultDate}"</#if><#if minDate !=''>, minDate : "${minDate?date("yyyy-MM-dd")}"</#if><#if maxDate !=''>, maxDate : "${maxDate?date("yyyy-MM-dd")}"</#if>, onClose: function(selectedDates, dateStr, instance){ instance.input.classList.add("notEmpty"); } });
});
</script>
</#macro>
<#-- INIT THEME DATE PICKER COMPONENT        -->
<#macro initThemeDatePicker>
<#if themePickerIsLoaded?? && themePickerIsLoaded>
<#else>
<link rel="stylesheet" href="js/flatpickr/bootstrap-flatpickr.min.css">
<link rel="stylesheet" href="js/flatpickr/style/themecitelibre.css">
<script src="js/util/lutece.js" charset="utf-8"></script>
<script src="js/flatpickr/bootstrap-flatpickr.min.js" charset="utf-8"></script>
<script src="js/flatpickr/locales/bootstrap-flatpickr.fr.js" charset="utf-8"></script>
<script>
// Get current browser lang
let browserCurrentLocale = navigator.language
let browserLang = browserCurrentLocale.split('-')[0]
if( !browserCurrentLocale.startsWith('fr') ){
    let langLib = 'js/flatpickr/locales/bootstrap-flatpickr.' + browserLang + '.js';
    loadScript( langLib );
}
</script>
<#assign themePickerIsLoaded = true />
</#if>
</#macro>
<#-- END COMPONENTS                     -->
<#-- END THEME MACROS                   -->
<#-- DEPRECATED MACROS                  -->
<#-- Compatibility version 1            -->
<#-- cStepContent -->
<#macro cStepContent title id='' class='' help='' iterable=false iteration=0 labelAddIteration='Ajouter' labelDelIteration='#i18n{themecitelibre.labelDelete}' params=''></#macro>
<#-- cCustomListArrow USE cList  DEPRECATED  -->
<#macro cCustomListArrow items=''>
<@cList items />
</#macro>  
<#-- cCustomList USE cList DEPRECATED  -->
<#macro cCustomList items type='arrow' class='' id='' params=''>
<@cList items type class id params >
    <#nested>    
</@cList>
</#macro>  
<#-- MACRO consentement cookies CNIL            -->
<#-- Name : DEPRECATED  cConsent                -->
<#-- Attributes List  :                         -->
<#-- title : 'Ce site'                          -->
<#-- linkLabel='cookies'                        -->
<#-- link='/pages/mentions-legales-234'         -->
<#-- id='cookie-banner-parisfr'                 -->
<#-- class                                      -->
<#-- params                                     -->
<#macro cConsent title='Ce site' linkLabel='cookies' link='/pages/mentions-legales-234' id='cookie-banner-parisfr' class='' params=''>
<#-- Managed in init_site.js -->
<@cSection type='div' class='cookies ${class}' id=id >
  <@cSection type='div' class='cookies-banner'>
    <@cText class='cookies-banner-text'>
        <#local legalLink><@cLink href=link label=linkLabel class='font-' /></#local>
        ${i18n( "themecitelibre.msgLegal", title, legalLink )}
    </@cText>
    <@cBtn label='#i18n{themecitelibre.labelAccept}' type='button' class='action' id='cookie-banner-parisfr-accept' />            
  </@cSection>
</@cSection>
</#macro>
<#-- END DEPRECATED MACROS -->
<#-- INTERNAL FUNCTIONS -->
<#--
* Generates a "random" integer between min and max (inclusive)
*
* Note the values this function returns are based on the current
* second the function is called and thus are highly deterministic
* and SHOULD NOT be used for anything other than inconsequential
* purposes, such as picking a random image to display.
-->
<#function rand v>
  <#local now = .now?long?c />
  <#local randomNum = v + ( now?substring(now?length-1) + now?substring(now?length-2))?number />
  <#if (randomNum gt 1)>
    <#assign _rand = randomNum % 1 />
  <#else>
    <#assign _rand = randomNum />
  </#if>
  <#local n = .now?long?c />
  <#local randomN = (n?substring( n?length-1) + n?substring( n?length-2 ))?number />
  <#return ( randomN + (( 30 - randomN ) * _rand))?round />
</#function>
<#assign rnd="0.${turnoverstr(.now?long?string)}"?number />
<#function random >
<#local h="0.${turnoverstr(.now?long?string)}" />
<#local r=h?number + rnd />
<#if r gte 1>
    <#local r=r-1 />
</#if>
<#assign rnd=r />
<#return r />
</#function>
<#function turnoverstr str >
<#local l = str?length />
<#local r = ""/>
<#list 1..l as i>
    <#local r = r+str?substring(l-i,l-i+1) />
</#list>
<#return r/>
</#function>